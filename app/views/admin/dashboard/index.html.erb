<div class="admin-dashboard">
  <div class="admin-header">
    <h1>Admin Dashboard</h1>
    <p class="admin-subtitle">Manage users, channels, and monitor system performance</p>
  </div>

  <div class="stats-overview">
    <div class="stat-card primary">
      <div class="stat-icon">
        <i class="admin-icon-users"></i>
      </div>
      <div class="stat-content">
        <span class="stat-value"><%= @total_users %></span>
        <span class="stat-label">Total Users</span>
      </div>
    </div>

    <div class="stat-card info">
      <div class="stat-icon">
        <i class="admin-icon-channels"></i>
      </div>
      <div class="stat-content">
        <span class="stat-value"><%= @total_channels %></span>
        <span class="stat-label">Total Channels</span>
      </div>
    </div>

    <div class="stat-card success">
      <div class="stat-icon">
        <i class="admin-icon-trades"></i>
      </div>
      <div class="stat-content">
        <span class="stat-value"><%= @total_trades %></span>
        <span class="stat-label">Total Trades</span>
      </div>
    </div>
  </div>

  <div class="admin-sections">
    <!-- Recent Users Section -->
    <div class="admin-section">
      <div class="section-header">
        <h2>Recent Users</h2>
        <%= link_to "View All", admin_users_path, class: "view-all-link" %>
      </div>
      
      <div class="table-responsive">
        <table class="admin-table">
          <thead>
            <tr>
              <th>Email</th>
              <th>Registered</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% if @recent_users&.any? %>
              <% @recent_users.each do |user| %>
                <tr>
                  <td>
                    <div class="user-info">
                      <div class="user-avatar"><%= user.email[0].upcase %></div>
                      <span class="user-email"><%= user.email %></span>
                    </div>
                  </td>
                  <td><%= user.created_at.strftime("%b %d, %Y") %></td>
                  <td>
                    <% if user.respond_to?(:active) && user.active? %>
                      <span class="status-badge active">Active</span>
                    <% else %>
                      <span class="status-badge">Active</span>
                    <% end %>
                  </td>
                  <td>
                    <div class="action-buttons">
                      <%= link_to "View", "#", class: "btn btn-sm btn-outline-primary" %>
                      <%= link_to "Edit", "#", class: "btn btn-sm btn-outline-secondary" %>
                    </div>
                  </td>
                </tr>
              <% end %>
            <% else %>
              <tr>
                <td colspan="4" class="text-center">No users found.</td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Recent Trades Section -->
    <div class="admin-section">
      <div class="section-header">
        <h2>Recent Trades</h2>
        <%= link_to "View All", admin_trades_path, class: "view-all-link" %>
      </div>
      
      <div class="table-responsive">
        <table class="admin-table">
          <thead>
            <tr>
              <th>User</th>
              <th>Trading Pair</th>
              <th>Type</th>
              <th>Amount</th>
              <th>Status</th>
              <th>Date</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% if @recent_trades&.any? %>
              <% @recent_trades.each do |trade| %>
                <tr>
                  <td>
                    <% if trade.respond_to?(:user) && trade.user %>
                      <%= trade.user.email %>
                    <% else %>
                      Unknown
                    <% end %>
                  </td>
                  <td><span class="trading-pair"><%= trade.trading_pair %></span></td>
                  <td>
                    <span class="trade-type <%= trade.trade_type.to_s.downcase %>">
                      <%= trade.trade_type %>
                    </span>
                  </td>
                  <td><%= trade.amount %> <%= trade.trading_pair.split('/').first %></td>
                  <td>
                    <span class="status-badge <%= trade.status.to_s.downcase %>">
                      <%= trade.status %>
                    </span>
                  </td>
                  <td><%= trade.created_at.strftime("%b %d, %H:%M") %></td>
                  <td>
                    <div class="action-buttons">
                      <%= link_to "View", "#", class: "btn btn-sm btn-outline-primary" %>
                    </div>
                  </td>
                </tr>
              <% end %>
            <% else %>
              <tr>
                <td colspan="7" class="text-center">No trades found.</td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Recent Payments Section -->
    <div class="admin-section">
      <div class="section-header">
        <h2>Recent Payments</h2>
        <%= link_to "View All", admin_payments_path, class: "view-all-link" %>
      </div>
      
      <div class="table-responsive">
        <table class="admin-table">
          <thead>
            <tr>
              <th>User</th>
              <th>Amount</th>
              <th>Method</th>
              <th>Status</th>
              <th>Date</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% if @recent_payments&.any? %>
              <% @recent_payments.each do |payment| %>
                <tr>
                  <td>
                    <% if payment.respond_to?(:user) && payment.user %>
                      <%= payment.user.email %>
                    <% else %>
                      Unknown
                    <% end %>
                  </td>
                  <td><%= number_to_currency(payment.amount) %></td>
                  <td><%= payment.payment_method %></td>
                  <td>
                    <span class="status-badge <%= payment.status.to_s.downcase %>">
                      <%= payment.status %>
                    </span>
                  </td>
                  <td><%= payment.created_at.strftime("%b %d, %Y") %></td>
                  <td>
                    <div class="action-buttons">
                      <%= link_to "View", "#", class: "btn btn-sm btn-outline-primary" %>
                      <% if payment.status.to_s.downcase == 'pending' %>
                        <%= link_to "Approve", "#", class: "btn btn-sm btn-outline-success" %>
                      <% end %>
                    </div>
                  </td>
                </tr>
              <% end %>
            <% else %>
              <tr>
                <td colspan="6" class="text-center">No payments found.</td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<style>
  .admin-dashboard {
    max-width: 1300px;
    margin: 0 auto;
    padding: 30px 20px;
  }
  
  .admin-header {
    margin-bottom: 30px;
  }
  
  .admin-header h1 {
    font-size: 32px;
    font-weight: 700;
    color: #222831;
    margin-bottom: 5px;
  }
  
  .admin-subtitle {
    font-size: 16px;
    color: #666;
  }
  
  .stats-overview {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 35px;
  }
  
  .stat-card {
    background: white;
    border-radius: 10px;
    padding: 25px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
    display: flex;
    align-items: center;
    border-left: 4px solid #ddd;
  }
  
  .stat-card.primary {
    border-left-color: #00ADB5;
  }
  
  .stat-card.info {
    border-left-color: #3498db;
  }
  
  .stat-card.success {
    border-left-color: #2ed573;
  }
  
  .stat-card.warning {
    border-left-color: #ffa800;
  }
  
  .stat-card.danger {
    border-left-color: #ff4757;
  }
  
  .stat-icon {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: rgba(0, 173, 181, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 20px;
  }
  
  .admin-icon-users:before {
    content: "ðŸ‘¥";
    font-size: 28px;
  }
  
  .admin-icon-channels:before {
    content: "ðŸ“¡";
    font-size: 28px;
  }
  
  .admin-icon-trades:before {
    content: "ðŸ“Š";
    font-size: 28px;
  }
  
  .stat-content {
    flex: 1;
  }
  
  .stat-value {
    display: block;
    font-size: 36px;
    font-weight: 700;
    color: #222831;
    line-height: 1;
  }
  
  .stat-label {
    color: #666;
    font-size: 14px;
  }
  
  .admin-sections {
    display: flex;
    flex-direction: column;
    gap: 30px;
  }
  
  .admin-section {
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
    padding: 25px;
  }
  
  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid #eee;
  }
  
  .section-header h2 {
    font-size: 20px;
    font-weight: 600;
    margin: 0;
    color: #222831;
  }
  
  .view-all-link {
    color: #00ADB5;
    font-size: 14px;
    text-decoration: none;
  }
  
  .view-all-link:hover {
    text-decoration: underline;
  }
  
  .table-responsive {
    overflow-x: auto;
  }
  
  .admin-table {
    width: 100%;
    border-collapse: collapse;
  }
  
  .admin-table th,
  .admin-table td {
    padding: 12px 15px;
    text-align: left;
  }
  
  .admin-table th {
    font-weight: 600;
    color: #555;
    font-size: 14px;
    background-color: #f8f9fa;
  }
  
  .admin-table tbody tr {
    border-bottom: 1px solid #f2f2f2;
  }
  
  .admin-table tbody tr:hover {
    background-color: #f9f9f9;
  }
  
  .text-center {
    text-align: center;
  }
  
  .user-info {
    display: flex;
    align-items: center;
  }
  
  .user-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background-color: #00ADB5;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    margin-right: 10px;
  }
  
  .user-email {
    font-weight: 500;
  }
  
  .trade-type {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
  }
  
  .trade-type.buy {
    background-color: rgba(46, 213, 115, 0.15);
    color: #2ed573;
  }
  
  .trade-type.sell {
    background-color: rgba(255, 71, 87, 0.15);
    color: #ff4757;
  }
  
  .status-badge {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
  }
  
  .status-badge.completed,
  .status-badge.active,
  .status-badge.success {
    background-color: rgba(46, 213, 115, 0.15);
    color: #2ed573;
  }
  
  .status-badge.pending {
    background-color: rgba(255, 168, 0, 0.15);
    color: #ffa800;
  }
  
  .status-badge.failed,
  .status-badge.cancelled,
  .status-badge.declined {
    background-color: rgba(255, 71, 87, 0.15);
    color: #ff4757;
  }
  
  .action-buttons {
    display: flex;
    gap: 8px;
  }
  
  .btn-sm {
    padding: 5px 10px;
    font-size: 12px;
    border-radius: 4px;
    text-decoration: none;
  }
  
  .btn-outline-primary {
    border: 1px solid #00ADB5;
    color: #00ADB5;
  }
  
  .btn-outline-primary:hover {
    background-color: rgba(0, 173, 181, 0.1);
  }
  
  .btn-outline-secondary {
    border: 1px solid #6c757d;
    color: #6c757d;
  }
  
  .btn-outline-secondary:hover {
    background-color: rgba(108, 117, 125, 0.1);
  }
  
  .btn-outline-success {
    border: 1px solid #2ed573;
    color: #2ed573;
  }
  
  .btn-outline-success:hover {
    background-color: rgba(46, 213, 115, 0.1);
  }
  
  @media (max-width: 768px) {
    .stats-overview {
      grid-template-columns: 1fr;
    }
    
    .action-buttons {
      flex-direction: column;
    }
  }
</style>